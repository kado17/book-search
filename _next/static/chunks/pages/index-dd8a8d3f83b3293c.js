(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5006:function(n,e,t){"use strict";t.r(e);var r=t(29),o=t(7794),c=t.n(o),a=t(9669),i=t.n(a),s=t(7294),u=t(2125),f=t(5055),l=t.n(f),p=t(5893);function d(n,e){var t="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(!n)return;if("string"===typeof n)return h(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(n,e)}(n))||e&&n&&"number"===typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,i=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return a=n.done,n},e:function(n){i=!0,c=n},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw c}}}}function h(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var y=u.ZP.div.withConfig({displayName:"pages__Container",componentId:"sc-eccczk-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;min-height:100vh;padding:0 0.5rem;"]),v=u.ZP.input.attrs((function(){return{type:"text"}})).withConfig({displayName:"pages__InputBox",componentId:"sc-eccczk-1"})([""]),g=u.ZP.button.withConfig({displayName:"pages__B",componentId:"sc-eccczk-2"})(["width:10vh;height:5vh;"]);e.default=function(){var n=(0,s.useState)(""),e=n[0],t=n[1],o=function(){var n=(0,r.Z)(c().mark((function n(e){var t;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={transformResponse:[function(n){var e;return new(l().Parser)({async:!1,explicitArray:!1}).parseString(n,(function(n,t){e=t})),e}]},n.next=3,i().get(e,t);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),a=function(n){var e="https://iss.ndl.go.jp/api/sru?operation=searchRetrieve&onlyBib=true&maximumRecords=10&recordSchema=dcndl_simple&recordPacking=xml";return""!=n&&(e+="&query=".concat(encodeURI("title=".concat(n," AND mediatype=1")))),console.log(e),e},u=function(n){var e=n.match(/^\w+:(\w+)/);return e?e[1]:n},f=function(n){if("object"===typeof n&&"$"in n&&"_"in n&&"string"===typeof n._&&"object"===typeof n.$){var e={};return e[u(n.$["xsi:type"])]=n._,e}return n},h=function(n){var e,t,r=[],o=d((t=n,Array.isArray(t)?t:[t]));try{var c=function(){var n=e.value,t={};Object.keys(n.recordData["dcndl_simple:dc"]).forEach((function(e){switch(e){case"$":case"rdfs:seeAlso":break;default:var r=u(e),o=n.recordData["dcndl_simple:dc"][e];if(Array.isArray(o)&&"string"!==typeof o){var c,a={},i=[],s=d(o);try{for(s.s();!(c=s.n()).done;){var l=c.value;"object"===typeof l?Object.assign(a,f(l)):"string"===typeof l&&i.push(l)}}catch(p){s.e(p)}finally{s.f()}0===i.length?t[r]=a:(0!==Object.keys(a).length&&i.push(a),t[r]=i)}else t[r]="object"===typeof o?f(o):o}})),r.push(t)};for(o.s();!(e=o.n()).done;)c()}catch(a){o.e(a)}finally{o.f()}console.log(r)},m=function(){var n=(0,r.Z)(c().mark((function n(e){var t,r;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={},n.next=3,o(a(e)).then((function(n){t=n.data})).catch((function(n){console.error(n),t={}}));case 3:console.log(t),"searchRetrieveResponse"in t&&("diagnostics"in(r=t.searchRetrieveResponse)?console.log("\u691c\u7d22\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002"):"numberOfRecords"in r&&parseInt(r.numberOfRecords)<1?console.log("\u7d50\u679c\u306a\u3057"):h(r.records.record));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,p.jsxs)(y,{children:[(0,p.jsx)(v,{onChange:function(n){t(n.target.value)}}),(0,p.jsx)(g,{onClick:function(){return m(e)}})]})}},8312:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5006)}])}},function(n){n.O(0,[562,774,888,179],(function(){return e=8312,n(n.s=e);var e}));var e=n.O();_N_E=e}]);