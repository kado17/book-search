(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1200:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var r=n(9499),o=n(7294),c=n(2125),i={src:"/book-search/_next/static/media/gray.8af2b8ec.jpg",height:294,width:200,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgABQMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAArYP/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/9oACAEBAAE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q=="},a=n(29),s=n(7794),u=n.n(s),A=n(9669),l=n.n(A),f=n(5055),p=n.n(f);function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,c=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw c}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(){var e=(0,a.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={transformResponse:[function(e){var t;return new(p().Parser)({async:!1,explicitArray:!1}).parseString(e,(function(e,n){t=n})),t}]},e.next=3,l().get(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=e.match(/^\w+:(\w+)/);return t?t[1]:e},b=function(e){if("$"in e&&"_"in e&&"string"===typeof e._&&"object"===typeof e.$&&"xsi:type"in e.$){var t={};return t[y(e.$["xsi:type"])]=e._,t}return e},m=function(e){var t,n=[],r=d(e);try{var o=function(){var e=t.value,r={};Object.keys(e.recordData["dcndl_simple:dc"]).forEach((function(t){switch(t){case"$":case"rdfs:seeAlso":break;default:var n=y(t),o=e.recordData["dcndl_simple:dc"][t];if(Array.isArray(o)&&"string"!==typeof o){var c,i=[],a={},s=d(o);try{for(s.s();!(c=s.n()).done;){var u=c.value;"object"===typeof u?Object.assign(a,b(u)):"string"===typeof u&&i.push(u)}}catch(A){s.e(A)}finally{s.f()}0===i.length?r[n]=a:(0!==Object.keys(a).length&&i.push(a),r[n]=i)}else r[n]="object"===typeof o?b(o):o}})),n.push(r)};for(r.s();!(t=r.n()).done;)o()}catch(c){r.e(c)}finally{r.f()}return console.log("NDLDataShaping",n),n},v=function(){var e=(0,a.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.openbd.jp/v1/get?isbn=".concat(t),console.log(n),e.next=4,l().get(n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.Z)(u().mark((function e(t){var n,r,o,c,i,a,s,A,l,f,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),n=[],r=d(t),e.prev=3,r.s();case 5:if((o=r.n()).done){e.next=25;break}if(c=o.value,i={title:"",creator:"",publisher:"",issued:"",cover:"",textContent:""},!("identifier"in c)||"object"!==typeof c.identifier||!("ISBN"in c.identifier)){e.next=21;break}return e.next=11,v(String(c.identifier.ISBN)).then((function(e){return null!==e.data[0]?e.data[0]:{}})).catch((function(e){return console.error(e),{}}));case 11:if(a=e.sent,0===Object.keys(a).length){e.next=21;break}return i.title=a.summary.title,i.creator=a.summary.author,i.publisher=a.summary.publisher,i.cover=a.summary.cover,i.issued=a.summary.pubdate,"TextContent"in a.onix.CollateralDetail&&(i.textContent=a.onix.CollateralDetail.TextContent[0].Text),n.push(i),e.abrupt("continue",23);case 21:for(s=0,A=["title","creator","publisher","issued"];s<A.length;s++)(l=A[s])in c&&(f=c[l],Array.isArray(f)?i[l]="".concat(String(f.join("  ")),"\u2026"):"issued"===l&&f instanceof Object&&!(f instanceof Array)?(p=Object.keys(f),i[l]=String(f[p[0]])):i[l]=String(f));n.push(i);case 23:e.next=5;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),r.e(e.t0);case 30:return e.prev=30,r.f(),e.finish(30);case 33:return console.log("convBookData",n),e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,null,[[3,27,30,33]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t="https://iss.ndl.go.jp/api/sru?operation=searchRetrieve&onlyBib=true&maximumRecords=20&recordSchema=dcndl_simple&recordPacking=xml&query=mediatype=1 AND dpid=iss-ndl-opac",n="";return Object.keys(e).forEach((function(t){if(""!=e[t])if(["title","creator","publisher"].includes(t)){var r,o=d(e[t].split(" "));try{for(o.s();!(r=o.n()).done;){var c=r.value;" "!==c&&(n+=" AND ".concat(t,"=").concat(c))}}catch(a){o.e(a)}finally{o.f()}}else{var i=e[t].match(/^(\d{10}|\d{13})$/);if(!i)return console.log("".concat(t,"\u3067\u30a8\u30e9\u30fc")),"";n+=" AND ".concat(t,"=").concat(i[0])}})),""===n?"":(console.log(encodeURI(t+n),n),encodeURI(t+n))},j=function(){var e=(0,a.Z)(u().mark((function e(t){var n,r,o,c,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},""!==(r=w(t))){e.next=7;break}return console.log("\u8981\u7d20\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),e.abrupt("return","\u8981\u7d20\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044");case 7:return e.next=9,g(r).then((function(e){n=e.data})).catch((function(e){console.error(e),n={}}));case 9:if(console.log(n),!("searchRetrieveResponse"in n)){e.next=29;break}if(!("diagnostics"in(o=n.searchRetrieveResponse))){e.next=17;break}return console.log("\u691c\u7d22\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002"),e.abrupt("return","\u691c\u7d22\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3044\u308b");case 17:if(!("numberOfRecords"in o&&parseInt(o.numberOfRecords)<1)){e.next=22;break}return console.log("\u7d50\u679c\u306a\u3057"),e.abrupt("return","\u7d50\u679c\u306a\u3057");case 22:return console.log("\u5f15\u6570",o.records.record),c=m((a=o.records.record,Array.isArray(a)?a:[a])),e.next=26,x(c);case 26:return i=e.sent,console.log("RESULT",i),e.abrupt("return",i);case 29:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}(),k=n(5893);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=c.ZP.div.withConfig({displayName:"pages__Container",componentId:"sc-eccczk-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:0 0.5rem;background-color:gray;"]),O=c.ZP.div.withConfig({displayName:"pages__Box",componentId:"sc-eccczk-1"})(["display:flex;"]),I=c.ZP.label.withConfig({displayName:"pages__BoxLable",componentId:"sc-eccczk-2"})([""]),P=c.ZP.input.attrs((function(){return{type:"text"}})).withConfig({displayName:"pages__InputBox",componentId:"sc-eccczk-3"})([""]),S=c.ZP.button.withConfig({displayName:"pages__B",componentId:"sc-eccczk-4"})(["width:10vh;height:5vh;"]),D=c.ZP.div.withConfig({displayName:"pages__Frame",componentId:"sc-eccczk-5"})(["display:flex;flex-wrap:wrap;width:75%;"]),N=c.ZP.div.withConfig({displayName:"pages__ItemContainer",componentId:"sc-eccczk-6"})(["display:flex;width:50%;background-color:white;border:1vh solid black;img{width:auto;height:100%;}"]),B=c.ZP.div.withConfig({displayName:"pages__ItemTextContainer",componentId:"sc-eccczk-7"})(["margin-right:5%;margin-left:5%;"]),Q=function(){var e=(0,o.useState)({}),t=e[0],n=e[1],c=(0,o.useState)(""),a=c[0],s=c[1];return(0,k.jsxs)(E,{children:[[["\u30bf\u30a4\u30c8\u30eb","title"],["\u8457\u8005","creator"],["\u51fa\u7248\u793e","publisher"],["ISBN","isbn"]].map((function(e,t){return(0,k.jsxs)(O,{children:[(0,k.jsx)(I,{children:"".concat(e[0],"\uff1a")}),(0,k.jsx)(P,{onChange:function(t){n((function(n){return _(_({},n),{},(0,r.Z)({},e[1],t.target.value))}))}})]},t)})),(0,k.jsx)(S,{onClick:function(){j(t).then((function(e){console.log(i),s(e)}))}}),"string"===typeof a||void 0===a?"":(0,k.jsx)(D,{children:a.map((function(e,t){return(0,k.jsxs)(N,{children:[(0,k.jsx)("img",{src:""!==e.cover?e.cover:i.src,alt:"img"}),(0,k.jsxs)(B,{children:[(0,k.jsx)("h2",{children:e.title}),(0,k.jsx)("p",{children:e.textContent}),(0,k.jsx)("p",{children:e.creator}),(0,k.jsx)("p",{children:e.publisher}),(0,k.jsx)("p",{children:e.issued})]})]},t)}))})]})}},8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1200)}])}},function(e){e.O(0,[562,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);