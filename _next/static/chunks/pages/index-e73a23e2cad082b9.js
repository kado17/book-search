(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5006:function(e,n,t){"use strict";t.r(n);var r=t(9499),o=t(29),c=t(7794),i=t.n(c),a=t(9669),s=t.n(a),u=t(7294),f=t(2125),l=t(5055),p=t.n(l),d=t(5893);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function v(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){a=!0,c=e},f:function(){try{i||null==t.return||t.return()}finally{if(a)throw c}}}}function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var b=f.ZP.div.withConfig({displayName:"pages__Container",componentId:"sc-eccczk-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;min-height:100vh;padding:0 0.5rem;"]),m=f.ZP.div.withConfig({displayName:"pages__Box",componentId:"sc-eccczk-1"})(["display:flex;"]),w=f.ZP.label.withConfig({displayName:"pages__BoxLable",componentId:"sc-eccczk-2"})([""]),j=f.ZP.input.attrs((function(){return{type:"text"}})).withConfig({displayName:"pages__InputBox",componentId:"sc-eccczk-3"})([""]),_=f.ZP.button.withConfig({displayName:"pages__B",componentId:"sc-eccczk-4"})(["width:10vh;height:5vh;"]);n.default=function(){var e=(0,u.useState)({}),n=e[0],t=e[1],c=function(){var e=(0,o.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={transformResponse:[function(e){var n;return new(p().Parser)({async:!1,explicitArray:!1}).parseString(e,(function(e,t){n=t})),n}]},e.next=3,s().get(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),a=function(e){var n="https://iss.ndl.go.jp/api/sru?operation=searchRetrieve&onlyBib=true&maximumRecords=10&recordSchema=dcndl_simple&recordPacking=xml&query=mediatype=1",t="";return Object.keys(e).forEach((function(n){if(""!=e[n])if(["title","creator","publisher"].includes(n)){var r,o=v(e[n].split(" "));try{for(o.s();!(r=o.n()).done;){var c=r.value;" "!==c&&(t+=" AND ".concat(n,"=").concat(c))}}catch(s){o.e(s)}finally{o.f()}}else{var i;i=["from","until"].includes(n)?/^(\d{4}|\d{4}-\d{2}|\d{4}-\d{2}-\d{2})$/:/^(\d{10}|\d{13})$/;var a=e[n].match(i);if(!a)return console.log("".concat(n,"\u3067\u30a8\u30e9\u30fc")),"";t+=" AND ".concat(n,"=").concat(a[0])}})),""===t?"":(console.log(n+encodeURI(t),t),n+encodeURI(t))},f=function(e){var n=e.match(/^\w+:(\w+)/);return n?n[1]:e},l=function(e){if("object"===typeof e&&"$"in e&&"_"in e&&"string"===typeof e._&&"object"===typeof e.$){var n={};return n[f(e.$["xsi:type"])]=e._,n}return e},y=function(e){var n,t,r=[],o=v((t=e,Array.isArray(t)?t:[t]));try{var c=function(){var e=n.value,t={};Object.keys(e.recordData["dcndl_simple:dc"]).forEach((function(n){switch(n){case"$":case"rdfs:seeAlso":break;default:var r=f(n),o=e.recordData["dcndl_simple:dc"][n];if(Array.isArray(o)&&"string"!==typeof o){var c,i={},a=[],s=v(o);try{for(s.s();!(c=s.n()).done;){var u=c.value;"object"===typeof u?Object.assign(i,l(u)):"string"===typeof u&&a.push(u)}}catch(p){s.e(p)}finally{s.f()}0===a.length?t[r]=i:(0!==Object.keys(i).length&&a.push(i),t[r]=a)}else t[r]="object"===typeof o?l(o):o}})),r.push(t)};for(o.s();!(n=o.n()).done;)c()}catch(i){o.e(i)}finally{o.f()}console.log(r)},g=function(){var e=(0,o.Z)(i().mark((function e(n){var t,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},""!==(r=a(n))){e.next=6;break}console.log("\u8981\u7d20\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),e.next=10;break;case 6:return e.next=8,c(r).then((function(e){t=e.data})).catch((function(e){console.error(e),t={}}));case 8:console.log(t),"searchRetrieveResponse"in t&&("diagnostics"in(o=t.searchRetrieveResponse)?console.log("\u691c\u7d22\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002"):"numberOfRecords"in o&&parseInt(o.numberOfRecords)<1?console.log("\u7d50\u679c\u306a\u3057"):y(o.records.record));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,d.jsxs)(b,{children:[[["\u30bf\u30a4\u30c8\u30eb","title"],["\u8457\u8005","creator"],["\u51fa\u7248\u793e","publisher"],["\u958b\u59cb\u51fa\u7248\u5e74\u6708\u65e5","from"],["\u7d42\u4e86\u51fa\u7248\u5e74\u6708\u65e5","until"],["ISBN","isbn"]].map((function(e,n){return(0,d.jsxs)(m,{children:[(0,d.jsx)(w,{children:"".concat(e[0],"\uff1a")}),(0,d.jsx)(j,{onChange:function(n){t((function(t){return h(h({},t),{},(0,r.Z)({},e[1],n.target.value))}))}})]},n)})),(0,d.jsx)(_,{onClick:function(){return g(n)}})]})}},8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5006)}])}},function(e){e.O(0,[562,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);